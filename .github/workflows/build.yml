name: ğŸ—ï¸ Build & Validate

on:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        project:
          - "src/Aula 01 - HelloWorld/HelloWorldDotNet10.csproj"
          - "src/Aula 02 - Interceptors e Pattern Matching/InterceptorsAndPatternMatching.csproj"
          - "src/Aula 03 - API Minimalista com .NET 10/ApiMinimalistaDotNet10.csproj"
          - "src/Aula 04 - IntegraÃ§Ã£o com AI SDK (ML.NET)/MLNetDemo.csproj"

    steps:
      - name: ğŸ“¥ Checkout cÃ³digo
        uses: actions/checkout@v4

      - name: âš™ï¸ Configurar .NET 10
        uses: actions/setup-dotnet@v4
        with:
          dotnet-version: '10.0.x'

      - name: ğŸ“¦ Restaurar dependÃªncias
        run: dotnet restore ${{ matrix.project }}

      - name: ğŸ§± Compilar projeto
        run: dotnet build ${{ matrix.project }} --configuration Release --no-restore

      - name: â–¶ï¸ Executar projeto
        run: dotnet run --project ${{ matrix.project }} --no-build
